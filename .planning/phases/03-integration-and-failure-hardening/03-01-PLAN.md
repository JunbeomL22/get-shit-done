---
phase: 03-integration-and-failure-hardening
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - get-shit-done/workflows/plan-phase.md
  - get-shit-done/workflows/transition.md
autonomous: true
requirements:
  - CHAIN-02
  - MILE-01

must_haves:
  truths:
    - "plan-phase auto-skips the CONTEXT.md AskUserQuestion gate when workflow.auto_advance is true"
    - "transition.md Route A yolo mode always invokes plan-phase --auto without checking for CONTEXT.md"
    - "transition.md Route B yolo mode stops with a YOLO COMPLETE banner instead of invoking complete-milestone"
    - "transition.md Route B yolo mode clears yolo stanza and workflow.auto_advance on milestone complete"
    - "transition.md Route B non-yolo mode behavior is unchanged"
  artifacts:
    - path: "get-shit-done/workflows/plan-phase.md"
      provides: "YOLO auto-skip condition in Step 4"
      contains: "auto-continuing with research"
    - path: "get-shit-done/workflows/transition.md"
      provides: "YOLO-aware Route A and Route B in offer_next_phase step"
      contains: "yolo-state clear"
  key_links:
    - from: "plan-phase.md Step 4"
      to: "workflow.auto_advance config key"
      via: "config-get check before AskUserQuestion"
      pattern: "config-get workflow.auto_advance"
    - from: "transition.md Route B yolo"
      to: "yolo-state clear + config-set workflow.auto_advance false"
      via: "gsd-tools commands"
      pattern: "yolo-state clear"
---

<objective>
Wire plan-phase and transition.md for unattended YOLO chain operation.

Purpose: The existing auto-chain pipeline (plan-phase -> execute-phase -> verify -> transition) blocks at two points in YOLO mode: (1) plan-phase Step 4 asks the user about missing CONTEXT.md, and (2) transition.md Route B invokes complete-milestone instead of stopping. Additionally, transition.md Route A unnecessarily checks for CONTEXT.md in yolo mode. This plan makes three targeted edits to remove these blockers and add milestone-boundary cleanup.

Output: Updated plan-phase.md and transition.md workflow files (both source and installed copies).
</objective>

<execution_context>
@/home/junbeom/.claude/get-shit-done/workflows/execute-plan.md
@/home/junbeom/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-integration-and-failure-hardening/03-RESEARCH.md
@.planning/phases/02-launcher/02-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add YOLO auto-skip to plan-phase Step 4 and simplify transition Route A</name>
  <files>
    get-shit-done/workflows/plan-phase.md
    ~/.claude/get-shit-done/workflows/plan-phase.md
    get-shit-done/workflows/transition.md
    ~/.claude/get-shit-done/workflows/transition.md
  </files>
  <action>
**plan-phase.md Step 4 change:**

In the `## 4. Load CONTEXT.md` section, find the block that starts with:

```
**If `context_content` is null (no CONTEXT.md exists):**

Use AskUserQuestion:
```

Insert an auto-skip check BEFORE the AskUserQuestion block. The new logic should be:

```markdown
**If `context_content` is null (no CONTEXT.md exists):**

Check auto-advance config:
```bash
AUTO_CFG=$(node /home/junbeom/.claude/get-shit-done/bin/gsd-tools.cjs config-get workflow.auto_advance 2>/dev/null || echo "false")
```

**If `--auto` flag present OR `AUTO_CFG` is `"true"`:**

Display: `No CONTEXT.md — auto-continuing with research + requirements (YOLO mode)`

Proceed to step 5. Do NOT use AskUserQuestion.

**Otherwise (interactive mode):**

Use AskUserQuestion:
- header: "No context"
- question: "No CONTEXT.md found for Phase {X}..."
[...existing AskUserQuestion behavior unchanged...]
```

This matches the existing auto-advance check pattern used in Step 14. The `--auto` flag check ensures this also works for `--auto` invocations without YOLO mode active. Use `~/.claude/` paths in the source file (get-shit-done/workflows/) and absolute `/home/junbeom/.claude/` paths in the installed copy (matching existing convention).

**transition.md Route A yolo mode change:**

In the `offer_next_phase` step, find the `<if mode="yolo">` block under Route A. Currently it checks whether CONTEXT.md exists for the next phase and either invokes plan-phase or discuss-phase.

Replace the entire yolo-mode Route A block with a simplified version that ALWAYS invokes plan-phase --auto (no CONTEXT.md check needed since plan-phase now handles the gate):

```markdown
<if mode="yolo">

```
Phase [X] marked complete.

Next: Phase [X+1] — [Name]

⚡ Auto-continuing: Plan Phase [X+1]
```

Exit skill and invoke SlashCommand("/gsd:plan-phase [X+1] --auto")

</if>
```

Remove the CONTEXT.md existence check and the discuss-phase branch from the yolo block. The interactive/custom mode blocks remain completely unchanged.

**CRITICAL:** Both the git-tracked source file (`get-shit-done/workflows/plan-phase.md` and `get-shit-done/workflows/transition.md`) AND the installed copies (`~/.claude/get-shit-done/workflows/plan-phase.md` and `~/.claude/get-shit-done/workflows/transition.md`) must be updated. The source uses `~/.claude/` style paths; the installed copy uses absolute `/home/junbeom/.claude/` paths. Read both existing files to understand the path convention before editing.
  </action>
  <verify>
1. Read plan-phase.md Step 4 — confirm auto-skip check exists before AskUserQuestion, references `workflow.auto_advance` and `--auto` flag
2. Read transition.md Route A yolo block — confirm it invokes `plan-phase [X+1] --auto` directly without CONTEXT.md check
3. Read transition.md Route A interactive block — confirm it is UNCHANGED (still checks CONTEXT.md, still offers discuss-phase)
4. Verify both source and installed copies match in logic (differ only in path style)
  </verify>
  <done>
plan-phase Step 4 auto-skips the CONTEXT.md gate when auto_advance is true or --auto is present. transition.md Route A yolo mode always invokes plan-phase --auto without discuss-phase fallback. Interactive behavior in both files is unchanged.
  </done>
</task>

<task type="auto">
  <name>Task 2: Implement transition Route B yolo stop-with-banner and state cleanup</name>
  <files>
    get-shit-done/workflows/transition.md
    ~/.claude/get-shit-done/workflows/transition.md
  </files>
  <action>
In the `offer_next_phase` step, find the Route B `<if mode="yolo">` block. Currently it:
1. Runs `config-set workflow.auto_advance false` (before the yolo check, outside the if block)
2. Shows a milestone complete message
3. Invokes `SlashCommand("/gsd:complete-milestone {version}")`

Replace the Route B yolo block with a stop-with-banner implementation that does NOT invoke complete-milestone:

**Important ordering:** The `config-set workflow.auto_advance false` line currently sits BEFORE the `<if mode="yolo">` block (it's unconditional in Route B). This is fine — it runs for all modes. Inside the yolo block, add `yolo-state clear` BEFORE the banner display.

The new Route B yolo block:

```markdown
<if mode="yolo">

Clean up YOLO state (milestone is complete):
```bash
node ~/.claude/get-shit-done/bin/gsd-tools.cjs yolo-state clear
```

Display completion banner:
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 GSD ► YOLO COMPLETE
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

All {N} phases complete. Milestone done.
```

Stop. Return to user. Do NOT invoke complete-milestone — the user reviews and archives at their discretion.

</if>
```

The interactive/custom mode Route B block remains completely unchanged (still shows completion message and offers `/gsd:complete-milestone`).

**CRITICAL:** Update both the git-tracked source file and the installed copy. Use `~/.claude/` paths in source, `/home/junbeom/.claude/` in installed copy.

**Note on auto_advance clear ordering (from research Pitfall 1):** The existing `config-set workflow.auto_advance false` line that runs unconditionally in Route B is fine — it sits ABOVE the mode-specific blocks and clears auto_advance for ALL modes including yolo. The `yolo-state clear` inside the yolo block is the YOLO-specific cleanup. This ordering is correct: auto_advance cleared first, then yolo stanza removed.
  </action>
  <verify>
1. Read transition.md Route B yolo block — confirm it runs `yolo-state clear`, shows YOLO COMPLETE banner, does NOT invoke complete-milestone
2. Read transition.md Route B interactive block — confirm it is UNCHANGED (still shows completion and offers complete-milestone)
3. Confirm the unconditional `config-set workflow.auto_advance false` line still exists above the mode-specific blocks in Route B
4. Verify both source and installed copies match in logic
  </verify>
  <done>
transition.md Route B yolo mode clears yolo stanza and shows a completion banner. It does not invoke complete-milestone. The unconditional auto_advance clear still runs for all modes. Interactive Route B behavior is unchanged.
  </done>
</task>

</tasks>

<verification>
1. plan-phase.md: Step 4 has auto-skip condition referencing workflow.auto_advance; Step 14 auto-advance check is UNCHANGED
2. transition.md: Route A yolo always goes to plan-phase --auto; Route B yolo clears state and shows banner
3. No changes to execute-phase.md or verify-work.md (confirmed by comparing file timestamps)
4. Interactive mode behavior in both plan-phase.md and transition.md is completely unchanged
5. Both source (get-shit-done/workflows/) and installed (~/.claude/get-shit-done/workflows/) copies are updated and consistent
</verification>

<success_criteria>
- plan-phase auto-skips CONTEXT.md gate in YOLO/auto mode (CHAIN-02)
- transition Route A yolo always invokes plan-phase --auto (CHAIN-02)
- transition Route B yolo stops with banner, clears state, does not invoke complete-milestone (MILE-01)
- All interactive mode behavior is unchanged
- Both file copies (source and installed) are updated
</success_criteria>

<output>
After completion, create `.planning/phases/03-integration-and-failure-hardening/03-01-SUMMARY.md`
</output>
